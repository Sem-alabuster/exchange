<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Регистрация — CryptoEx</title>
  <style>
  :root{
    --bg:#f6f8f9; --card:#fff; --text:#0b1f19; --muted:#6b7a76; --line:#e7eceb;
    --primary:#0aa39a; --primary2:#067e77; --shadow:0 18px 40px rgba(0,0,0,.06);
    --radius:22px;
  }
  *{box-sizing:border-box}
  body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; background:var(--bg); color:var(--text); }
  a{ color:inherit; text-decoration:none; }
  .container{ width:min(1160px, calc(100% - 40px)); margin:0 auto; }
  header{ background:#fff; border-bottom:1px solid var(--line); }
  .nav{ display:flex; align-items:center; justify-content:space-between; gap:18px; padding:18px 0; }
  .logo{ display:flex; align-items:center; gap:12px; font-weight:900; letter-spacing:.2px; color:var(--primary2); }
  
  .logo-img{ height:32px; width:auto; display:block; }
.logo-badge{ width:34px; height:34px; border-radius:50%; background:rgba(10,163,154,.12); display:grid; place-items:center; border:1px solid rgba(10,163,154,.25); }
  .menu{ display:flex; align-items:center; gap:18px; font-weight:600; color:#2a3d37; }
  .menu a{ padding:10px 8px; border-radius:12px; }
  .menu a:hover{ background:#f2f6f6; }
  .icons{ display:flex; align-items:center; gap:10px; }
  .iconbtn{ width:40px; height:40px; border-radius:14px; border:1px solid var(--line); background:#fff; display:grid; place-items:center; cursor:pointer; }
  .iconbtn:hover{ background:#f6faf9; }
  .pill{ border:1px solid var(--line); background:#fff; border-radius:999px; padding:8px 12px; font-weight:700; display:flex; align-items:center; gap:8px; }
  .dot{ width:8px; height:8px; border-radius:999px; background:var(--primary); }
  main{ padding:44px 0 70px; }
  .card{ background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); }
  .card-pad{ padding:26px; }
  .title{ font-size:42px; margin:0 0 18px; }
  .center-wrap{ display:flex; justify-content:center; }
  .auth-card{ width:min(520px, 100%); }
  .auth-head{ text-align:center; font-weight:900; font-size:26px; padding:22px 22px 8px; }
  .auth-body{ padding:22px; border-top:1px solid var(--line); }
  .field{ display:flex; flex-direction:column; gap:8px; margin-bottom:16px; }
  .field label{ font-weight:700; color:#2a3d37; }
  .input{ width:100%; padding:14px 14px; border-radius:14px; border:1px solid var(--line); outline:none; background:#f6f8fa; }
  .input:focus{ border-color:rgba(10,163,154,.5); background:#fff; }
  .btn{ width:100%; padding:14px 18px; border-radius:999px; border:0; background:linear-gradient(180deg, var(--primary), var(--primary2)); color:#fff; font-weight:900; cursor:pointer; }
  .btn:disabled{ opacity:.6; cursor:not-allowed; }
  .err{ background:#fff1f0; border:1px solid #ffd6d3; color:#8a1f17; padding:10px 12px; border-radius:14px; font-weight:700; margin:0 0 14px; display:none; }
  .hint{ color:var(--muted); font-weight:600; font-size:13px; text-align:center; margin-top:12px; }
  
  /* auth-dropdown */
  .user-menu{ position:relative; }
  .dropdown{ position:absolute; right:0; top:46px; min-width:180px; background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow); padding:8px; display:flex; flex-direction:column; gap:6px; z-index:1000; }
  .dropdown[hidden]{ display:none !important; }

  .ditem{ display:block; padding:10px 12px; border-radius:10px; color:var(--text); text-decoration:none; font-weight:700; font-size:14px; }
  .ditem:hover{ background:#f4f6f8; }
  .ditem.danger{ color:#b42318; background:transparent; border:0; text-align:left; cursor:pointer; width:100%; }
  .ditem.danger:hover{ background:#fff1f0; }
    </style>
</head>
<body>

<header>
  <div class="container">
    <div class="nav">
      <a class="logo" href="./index.html"><img class="logo-img" src="./logo.svg" alt="CryptoEx"></a>
      <nav class="menu">
        <a href="./rules.html">Правила</a>
        <a href="./rules.html#aml">AML/KYC</a>
        <a href="./partners.html">Партнерам</a>
        <a href="./reviews.html">Отзывы</a>
        <a href="./about.html">О нас</a>
      </nav>
      <div class="icons">
        <div class="user-menu">
          <button class="iconbtn" id="userMenuBtn" title="Профиль" aria-label="Профиль">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 12a4.2 4.2 0 1 0 0-8.4A4.2 4.2 0 0 0 12 12Z" stroke="#0aa39a" stroke-width="2"/>
              <path d="M4 20.2c1.9-4 5.1-6 8-6s6.1 2 8 6" stroke="#0aa39a" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
          <div class="dropdown" id="userMenu" hidden>
            <div id="userMenuLoggedOut">
              <a class="ditem" href="./login.html">Войти</a>
              <a class="ditem" href="./register.html">Регистрация</a>
            </div>
            <div id="userMenuLoggedIn" style="display:none">
              <a class="ditem" href="./account.html">Личный кабинет</a>
              <button class="ditem danger" type="button" id="logoutBtn">Выйти</button>
            </div>
          </div>
        </div>
        <a class="iconbtn" href="https://t.me/cryptoEXsupport" target="_blank" rel="noopener" title="Telegram" aria-label="Telegram">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M22 4 2.9 11.3c-.8.3-.8 1.4 0 1.7l4.6 1.6 1.7 5.3c.2.8 1.2 1 1.7.4l2.7-3 5.2 3.8c.6.4 1.4.1 1.6-.6L23 5.6c.2-.9-.6-1.6-1.5-1.3Z" stroke="#0aa39a" stroke-width="2" stroke-linejoin="round"/>
          </svg>
        </a>
        <div class="pill"><span class="dot"></span><span>RU</span></div>
      </div>
    </div>
  </div>
</header>

<main>
  <div class="container">
    
<div class="center-wrap">
  <div class="card auth-card">
    <div class="auth-head">Регистрация</div>
    <div class="auth-body">
      <div class="err" id="errBox"></div>

      <div class="field">
        <label for="email">Email</label>
        <input class="input" id="email" type="email" placeholder="name@gmail.com" autocomplete="email" />
      </div>

      <div class="field">
        <label for="pass">Пароль</label>
        <input class="input" id="pass" type="password" placeholder="Минимум 8 символов" autocomplete="new-password" />
      </div>

      <button class="btn" id="submitBtn">Отправить</button>
      <div class="hint">Уже есть аккаунт? <a href="./login.html" style="color:var(--primary2); font-weight:900;">Войти</a></div>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const errBox = document.getElementById("errBox");
  const emailEl = document.getElementById("email");
  const passEl = document.getElementById("pass");
  const btn = document.getElementById("submitBtn");

  function showErr(msg){
    errBox.textContent = msg;
    errBox.style.display = "block";
  }
  function hideErr(){ errBox.style.display = "none"; }

  btn.addEventListener("click", async () => {
    hideErr();
    btn.disabled = true;
    const email = emailEl.value.trim();
    const pass = passEl.value;
    const res = await CryptoExAuth.register(email, pass);
    btn.disabled = false;
    if (!res.ok) return showErr(res.message || "Ошибка регистрации");
    CryptoExAuth.toast("Регистрация успешна");
    window.location.href = "./account.html";
  });
});
</script>

  </div>
</main>
<script src="./auth.js"></script>
</body>
</html>
